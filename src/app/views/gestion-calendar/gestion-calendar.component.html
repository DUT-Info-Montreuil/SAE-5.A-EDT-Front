<div class="p-4 md:p-8 flex flex-col gap-y-8">
    <div class="w-full flex justify-between items-center">
        <h3 class="text-body">Gestion emploi du temps</h3>
        <h3 class="font-normal text-medium dark:text-medium text-right">{{ formattedDate }}</h3>
    </div>
    <div id="calendar-container" class="">
        <div class="flex flex-col gap-y-6">
            <div id="cal-buttons" class="flex flex-col items-center">
                <div id="cal-date-nav-button" class="flex flex-row items-center gap-x-3">
                    <button id="previous" [excludeDays]="excludeDays" mwlCalendarPreviousView [(viewDate)]="viewDate" [view]="view">
                        <svg class="fill-primary w-4 h-4" viewBox="0 0 25 25" fill="none" [ngClass]="{ 'rotate-180': null }">
                            <path
                                d="M12.5 0C19.4033 0 25 5.59667 25 12.5C25 19.4033 19.4033 25 12.5 25C5.59667 25 0 19.4033 0 12.5C0 5.59667 5.59667 0 12.5 0ZM8.58333 13.0917L13.9883 18.4967C14.1455 18.6485 14.356 18.7325 14.5745 18.7306C14.793 18.7287 15.002 18.641 15.1565 18.4865C15.311 18.332 15.3987 18.123 15.4006 17.9045C15.4025 17.686 15.3185 17.4755 15.1667 17.3183L10.3483 12.5L15.1667 7.68167C15.3185 7.5245 15.4025 7.314 15.4006 7.0955C15.3987 6.877 15.311 6.66799 15.1565 6.51348C15.002 6.35898 14.793 6.27134 14.5745 6.26944C14.356 6.26754 14.1455 6.35153 13.9883 6.50333L8.58333 11.9083C8.5055 11.9858 8.44389 12.0781 8.40211 12.1797C8.36033 12.2813 8.33922 12.3902 8.34 12.5C8.33945 12.6098 8.36067 12.7186 8.40244 12.8202C8.4442 12.9217 8.50569 13.014 8.58333 13.0917Z"
                            />
                        </svg>
                    </button>
                    <h3 class="flex text-body w-56 md:w-64 justify-center">{{ viewDate | calendarDate : view + "ViewTitle" : "fr" }}</h3>
                    <button id="next" [excludeDays]="excludeDays" mwlCalendarNextView [(viewDate)]="viewDate" [view]="view">
                        <svg class="fill-primary w-4 h-4" viewBox="0 0 25 25" fill="none" transform="rotate(180)">
                            <path
                                d="M12.5 0C19.4033 0 25 5.59667 25 12.5C25 19.4033 19.4033 25 12.5 25C5.59667 25 0 19.4033 0 12.5C0 5.59667 5.59667 0 12.5 0ZM8.58333 13.0917L13.9883 18.4967C14.1455 18.6485 14.356 18.7325 14.5745 18.7306C14.793 18.7287 15.002 18.641 15.1565 18.4865C15.311 18.332 15.3987 18.123 15.4006 17.9045C15.4025 17.686 15.3185 17.4755 15.1667 17.3183L10.3483 12.5L15.1667 7.68167C15.3185 7.5245 15.4025 7.314 15.4006 7.0955C15.3987 6.877 15.311 6.66799 15.1565 6.51348C15.002 6.35898 14.793 6.27134 14.5745 6.26944C14.356 6.26754 14.1455 6.35153 13.9883 6.50333L8.58333 11.9083C8.5055 11.9858 8.44389 12.0781 8.40211 12.1797C8.36033 12.2813 8.33922 12.3902 8.34 12.5C8.33945 12.6098 8.36067 12.7186 8.40244 12.8202C8.4442 12.9217 8.50569 13.014 8.58333 13.0917Z"
                            />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="flex justify-end gap-x-6">
                <app-button label="Ajouter" type="grey" (click)="openCourseModal()">
                    <ng-container left-icon>
                        <svg class="w-4 h-4 fill-dark dark:fill-white" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.3785 0.655518C8.40073 0.655518 6.46733 1.24201 4.82284 2.34082C3.17835 3.43963 1.89663 5.00142 1.13975 6.82868C0.382873 8.65594 0.18484 10.6666 0.570692 12.6064C0.956544 14.5462 1.90895 16.3281 3.30748 17.7266C4.706 19.1251 6.48783 20.0775 8.42764 20.4634C10.3674 20.8492 12.3781 20.6512 14.2054 19.8943C16.0326 19.1374 17.5944 17.8557 18.6932 16.2112C19.792 14.5667 20.3785 12.6333 20.3785 10.6555C20.3785 9.3423 20.1199 8.04194 19.6173 6.82868C19.1148 5.61543 18.3782 4.51303 17.4496 3.58445C16.521 2.65586 15.4186 1.91927 14.2054 1.41672C12.9921 0.914175 11.6918 0.655518 10.3785 0.655518ZM10.3785 18.6555C8.79629 18.6555 7.24957 18.1863 5.93398 17.3073C4.61839 16.4282 3.59301 15.1788 2.98751 13.717C2.38201 12.2552 2.22358 10.6466 2.53226 9.09479C2.84094 7.54294 3.60287 6.11748 4.72169 4.99866C5.84051 3.87984 7.26597 3.11792 8.81782 2.80923C10.3697 2.50055 11.9782 2.65898 13.44 3.26448C14.9018 3.86998 16.1512 4.89536 17.0303 6.21095C17.9093 7.52655 18.3785 9.07326 18.3785 10.6555C18.3785 12.7772 17.5357 14.8121 16.0354 16.3124C14.5351 17.8127 12.5003 18.6555 10.3785 18.6555ZM14.3785 9.65551H11.3785V6.65552C11.3785 6.3903 11.2732 6.13595 11.0856 5.94841C10.8981 5.76087 10.6438 5.65552 10.3785 5.65552C10.1133 5.65552 9.85897 5.76087 9.67144 5.94841C9.4839 6.13595 9.37854 6.3903 9.37854 6.65552V9.65551H6.37854C6.11333 9.65551 5.85897 9.76087 5.67144 9.94841C5.4839 10.1359 5.37854 10.3903 5.37854 10.6555C5.37854 10.9207 5.4839 11.1751 5.67144 11.3626C5.85897 11.5502 6.11333 11.6555 6.37854 11.6555H9.37854V14.6555C9.37854 14.9207 9.4839 15.1751 9.67144 15.3626C9.85897 15.5502 10.1133 15.6555 10.3785 15.6555C10.6438 15.6555 10.8981 15.5502 11.0856 15.3626C11.2732 15.1751 11.3785 14.9207 11.3785 14.6555V11.6555H14.3785C14.6438 11.6555 14.8981 11.5502 15.0856 11.3626C15.2732 11.1751 15.3785 10.9207 15.3785 10.6555C15.3785 10.3903 15.2732 10.1359 15.0856 9.94841C14.8981 9.76087 14.6438 9.65551 14.3785 9.65551Z"
                            />
                        </svg>
                    </ng-container>
                </app-button>
                <app-button label="Filtrer" (click)="openFilterModal()">
                    <ng-container left-icon>
                        <svg class="w-4 h-3 fill-white" viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 12H10C10.55 12 11 11.55 11 11C11 10.45 10.55 10 10 10H8C7.45 10 7 10.45 7 11C7 11.55 7.45 12 8 12ZM0 1C0 1.55 0.45 2 1 2H17C17.55 2 18 1.55 18 1C18 0.45 17.55 0 17 0H1C0.45 0 0 0.45 0 1ZM4 7H14C14.55 7 15 6.55 15 6C15 5.45 14.55 5 14 5H4C3.45 5 3 5.45 3 6C3 6.55 3.45 7 4 7Z" />
                        </svg>
                    </ng-container>
                </app-button>
            </div>

            <div class="flex flex-col">
                <div *ngIf="view === calendarView.Day" class="cal-day-headers !rounded-t-xl cursor-pointer" (click)="setView(calendarView.Week)">
                    <div [ngClass]="{ 'text-primary': isToday(viewDate), 'text-body dark:text-light': !isToday(viewDate) }" class="hover:text-primary dark:hover:text-primary py-4 flex flex-col items-center transition-all duration-300">
                        <b>{{ viewDate | date : "EEEE" : "fr" }}</b>
                        <span>{{ viewDate | date : "d MMM" : "fr" }}</span>
                    </div>
                </div>
                <ng-template #customEventTemplate let-event="event">
                    <app-custom-event-calendar [event]="event" />
                </ng-template>
                <span [ngSwitch]="view">
                    <mwl-calendar-week-view *ngSwitchCase="calendarView.Week" [viewDate]="viewDate" [events]="events" [excludeDays]="excludeDays" [dayStartHour]="dayStartHour" [dayEndHour]="dayEndHour" [hourSegments]="hourSegments" locale="fr" (eventClicked)="showEventDetails($event)" (dayHeaderClicked)="changeDay($event.day.date)" [refresh]="refresh" [hourSegmentHeight]="15" [eventTitleTemplate]="customEventTemplate"></mwl-calendar-week-view>
                    <mwl-calendar-day-view *ngSwitchCase="calendarView.Day" [viewDate]="viewDate" [events]="events" [dayStartHour]="dayStartHour" [dayEndHour]="dayEndHour" [hourSegments]="hourSegments" locale="fr" (click)="dayViewClick()" (eventClicked)="showEventDetails($event)" [refresh]="refresh" [hourSegmentHeight]="15" [eventTitleTemplate]="customEventTemplate"> </mwl-calendar-day-view>
                </span>
            </div>
            <app-course-modal [isOpen]="courseModalOpened" (closed)="closedCourseModal()" [mapTeachings]="mapTeachings" [mapTeachers]="mapTeachers" [mapRooms]="mapRooms" />
            <app-filter-modal [isOpen]="filterModalOpened" (closed)="closedFilterModal()" [mapSpecializations]="mapSpecializations" [mapTeachers]="mapTeachers" [mapRooms]="mapRooms" (filterChanged)="onFilterChanged($event)"></app-filter-modal>
        </div>
    </div>
</div>
